<% layout('../layouts/admin') %>

<div class="container py-5">
  <!-- Dashboard Header -->
  <div class="text-center mb-4">
    <h1 class="display-5 fw-bold">Admin Dashboard</h1>
    <p class="text-muted">Manage your library efficiently with these tools</p>
  </div>

  <!-- Admin Statistics -->
  <div class="row my-5 text-center">
    <div class="col-md-4">
      <div class="card shadow-sm border-0 rounded bg-primary text-white">
        <div class="card-body">
          <h4>Total Books</h4>
          <p class="display-4 fw-bold"><%= totalBooks %></p>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card shadow-sm border-0 rounded bg-success text-white">
        <div class="card-body">
          <h4>Books Borrowed</h4>
          <p class="display-4 fw-bold"><%= borrowedBooks %></p>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card shadow-sm border-0 rounded bg-warning text-dark">
        <div class="card-body">
          <h4>Available Books</h4>
          <p class="display-4 fw-bold"><%= availableBooks %></p>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Book Section -->
  <div class="card shadow-lg mb-5">
    <div class="card-body">
      <h4 class="mb-3">Add a New Book</h4>
      <form action="/admin/add-book" method="POST" class="d-flex flex-column gap-3">
        <input
          type="text"
          name="title"
          class="form-control"
          placeholder="Book Title"
          required
        />
        <input
          type="text"
          name="author"
          class="form-control"
          placeholder="Author"
          required
        />
        <input
          type="text"
          name="category"
          class="form-control"
          placeholder="Category"
        />
        <input
          type="number"
          name="quantity"
          class="form-control"
          placeholder="Quantity"
          required
        />
        <button type="submit" class="btn btn-primary">Add Book</button>
      </form>
    </div>
  </div>

  <!-- Assign Borrowed Books -->
  <div class="card shadow-lg">
    <div class="card-body">
      <h4 class="mb-3">Assign a Book to a Student</h4>
      <form action="/admin/assign-book" method="POST" class="d-flex flex-column gap-3">
        <select name="studentId" class="form-control" required>
          <option value="" disabled selected>Select Student</option>
          <% students.forEach((student) => { %>
            <option value="<%= student._id %>"><%= student.name %></option>
          <% }) %>
        </select>
        <select name="bookId" class="form-control" required>
          <option value="" disabled selected>Select Book</option>
          <% books.forEach((book) => { %>
            <option value="<%= book._id %>"><%= book.title %></option>
          <% }) %>
        </select>
        <input
          type="date"
          name="dueDate"
          class="form-control"
          placeholder="Due Date"
          required
        />
        <button type="submit" class="btn btn-success">Assign Book</button>
      </form>
    </div>
  </div>
</div>
